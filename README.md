```markdown
# 网站源代码下载工具

这是一个基于 Python 的 GUI 应用程序，用于下载指定网站的源代码及其相关资源（如 CSS、JavaScript 文件等）。该工具使用 `tkinter` 构建用户界面，并通过 `requests` 和 `BeautifulSoup` 库来抓取和解析网页内容。

## 功能特性

- **下载整个网站的源代码**：包括 HTML、CSS、JavaScript 文件等。
- **跨域资源下载**：可以选择是否下载跨域资源（即非当前域名下的资源）。
- **多线程下载**：使用多线程技术，避免 GUI 界面卡顿。
- **进度条显示**：实时显示下载进度。
- **自定义保存路径**：用户可以指定下载文件的保存路径。

## 依赖库

在运行此工具之前，请确保已安装以下 Python 库：

- `tkinter`：用于构建 GUI 界面。
- `requests`：用于发送 HTTP 请求。
- `BeautifulSoup`：用于解析 HTML 内容。
- `urllib`：用于处理 URL。
- `os`：用于处理文件路径。
- `re`：用于正则表达式处理。
- `threading`：用于多线程处理。
- `logging`：用于日志记录。

你可以通过以下命令安装所需的库：

```bash
pip install requests beautifulsoup4
```

## 使用方法

```markdown
1. **运行程序**：运行 `网站源代码下载工具.py` 文件，启动应用程序。

2. **输入网站 URL**：在 "网站 URL" 输入框中输入你想要下载的网站 URL。默认值为 `https://harksblog.us.kg`。

3. **选择保存路径**：在 "保存路径" 输入框中输入或选择你想要保存下载文件的路径。默认路径为当前工作目录下的 `downloads` 文件夹。

4. **选择是否下载跨域资源**：勾选 "下载跨域资源" 复选框，以决定是否下载非当前域名下的资源。

5. **开始下载**：点击 "开始下载" 按钮，程序将开始下载网站的源代码及其相关资源。

6. **查看进度**：下载过程中，进度条会实时显示下载进度，状态标签会显示当前下载的页面数量。

7. **完成下载**：下载完成后，程序会弹出一个消息框，提示下载完成，并显示保存路径。
```

## 代码结构

```markdown
- **`WebsiteDownloader` 类**：这是程序的核心类，负责处理用户界面、下载逻辑和进度更新。
  - `__init__`：初始化 GUI 界面和各个组件。
  - `browse_folder`：打开文件夹选择对话框，允许用户选择保存路径。
  - `start_download`：验证输入的 URL 和保存路径，并启动下载线程。
  - `is_valid_url`：验证 URL 是否有效。
  - `start_download_thread`：在新线程中执行下载操作，避免阻塞 GUI。
  - `download_website`：递归下载网站的所有页面和相关资源。
  - `get_file_name`：根据 URL 生成有效的文件名。
  - `update_gui`：更新 GUI 界面，显示下载进度和状态。

- **`main` 部分**：启动 `tkinter` 主循环，并调用 `update_gui` 方法以更新界面。
```

## 注意事项

```markdown
- **网络请求超时**：程序设置了 10 秒的超时时间，如果某个页面加载时间过长，程序会跳过该页面并继续下载其他页面。
- **文件名处理**：程序会自动处理文件名中的非法字符（如 `<`, `>`, `:`, `"`, `/`, `\`, `|`, `?`, `*`），并将其替换为下划线 `_`。
- **跨域资源下载**：默认情况下，程序只会下载与当前域名相同的资源。如果需要下载跨域资源，请勾选 "下载跨域资源" 复选框。
```

## 示例

```markdown
假设你想下载 `https://example.com` 的源代码，并将其保存到 `C:\Downloads` 文件夹中：

1. 在 "网站 URL" 输入框中输入 `https://example.com`。
2. 在 "保存路径" 输入框中输入 `C:\Downloads` 或通过 "浏览" 按钮选择该文件夹。
3. 点击 "开始下载" 按钮。
4. 下载完成后，程序会提示下载完成，并显示保存路径 `C:\Downloads\example_com`。
```

## 许可证

```markdown
此项目遵循 MIT 许可证。详情请参阅 [LICENSE](LICENSE) 文件。
```

## 贡献

```markdown
欢迎提交 Issue 和 Pull Request 来改进此工具。
```

## 作者

```markdown
- **作者**：Hank-Chrome(Gemini-2.0-flash-exp + Deepseek V3)
```
